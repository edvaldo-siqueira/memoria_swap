#!/bin/bash

# Defina os valores desejados
VFS_CACHE_PRESSURE=50  # Ajuste conforme necessário
SWAPPINESS=10          # Ajuste conforme necessário

# Aplicar as configurações
echo $VFS_CACHE_PRESSURE > /proc/sys/vm/vfs_cache_pressure
echo $SWAPPINESS > /proc/sys/vm/swappiness

# Tornar as mudanças permanentes
if ! grep -q "vm.vfs_cache_pressure" /etc/sysctl.conf; then
    echo "vm.vfs_cache_pressure=$VFS_CACHE_PRESSURE" >> /etc/sysctl.conf
fi

if ! grep -q "vm.swappiness" /etc/sysctl.conf; then
    echo "vm.swappiness=$SWAPPINESS" >> /etc/sysctl.conf
fi

# Aplicar as configurações do sysctl
sysctl -p

echo "Configurações aplicadas: vfs_cache_pressure=$VFS_CACHE_PRESSURE, swappiness=$SWAPPINESS"
